{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { clamp } from \"../../../helpers/math\";\nimport { useCustomEnsuredControl } from \"../../../hooks/useEnsureControl\";\nimport { VisuallyHidden } from \"../../Service/VisuallyHidden/VisuallyHidden\";\nimport { IconStar } from \"./icons/star\";\nconst MINIMUM_PRECISION = 0.1;\n/**\n * Renders a customizable rating component, allowing users to provide a rating by selecting a value using icons (e.g., stars).\n * Supports fractional ratings through precision control and allows for custom rating icon components.\n */\nexport const Rating = ({\n  precision = 1,\n  max = 5,\n  onChange,\n  value: valueProp = 0,\n  IconContainer = IconStar\n}) => {\n  const [value, setValue] = useCustomEnsuredControl({\n    defaultValue: valueProp,\n    onChange\n  });\n  const normalizedPrecision = clamp(precision, MINIMUM_PRECISION, 1);\n  const onChangeLabel = event => {\n    const {\n      target\n    } = event;\n    if (target instanceof HTMLInputElement) {\n      setValue(parseFloat(target.value));\n    }\n  };\n  const getPickedElementWidth = elementNumber => {\n    if (elementNumber <= value) {\n      return 1;\n    }\n    const valueRange = elementNumber - value;\n    if (valueRange > 0 && valueRange < 1) {\n      return 1 - valueRange;\n    }\n    return undefined;\n  };\n  const keys = Array.from(Array(max).keys());\n  return /*#__PURE__*/_jsxs(\"label\", {\n    className: \"tgui-0487bdb4329cd879\",\n    onChange: onChangeLabel,\n    children: [/*#__PURE__*/_jsx(VisuallyHidden, {\n      Component: \"input\",\n      name: \"rating\",\n      type: \"radio\",\n      value: 0\n    }), keys.map(key => {\n      const elementsWithPrecision = Math.floor(1 / normalizedPrecision);\n      const elements = Array.from(Array(elementsWithPrecision).keys());\n      const pickedElementWidth = getPickedElementWidth(key + 1);\n      return /*#__PURE__*/_jsxs(\"label\", {\n        className: \"tgui-6169bc2e9d6fdeb8\",\n        children: [pickedElementWidth !== undefined && /*#__PURE__*/_jsx(IconContainer, {\n          className: \"tgui-f0faaa15f44569ba\",\n          style: {\n            width: `${pickedElementWidth * 100}%`\n          }\n        }, \"star-picked\"), /*#__PURE__*/_jsx(IconContainer, {}, \"star\"), elements.map(element => /*#__PURE__*/_jsx(\"input\", {\n          type: \"radio\",\n          value: (key + (element + 1) * normalizedPrecision).toFixed(1),\n          name: \"rating\",\n          style: {\n            width: `${normalizedPrecision * 100}%`,\n            left: `${element * normalizedPrecision * 100}%`\n          },\n          className: \"tgui-52ba7059852e9950\"\n        }, element))]\n      }, key);\n    })]\n  });\n};","map":{"version":3,"names":["clamp","useCustomEnsuredControl","VisuallyHidden","IconStar","MINIMUM_PRECISION","Rating","precision","max","onChange","value","valueProp","IconContainer","setValue","defaultValue","normalizedPrecision","onChangeLabel","event","target","HTMLInputElement","parseFloat","getPickedElementWidth","elementNumber","valueRange","undefined","keys","Array","from","_jsxs","className","_jsx","Component","name","type","map","key","elementsWithPrecision","Math","floor","elements","pickedElementWidth","style","width","element","toFixed","left"],"sources":["/home/dmitry/Projects/MEPhI/MEPhI360/app/node_modules/@telegram-apps/telegram-ui/src/components/Form/Rating/Rating.tsx"],"sourcesContent":["import { ChangeEvent, ElementType, HTMLAttributes } from 'react';\nimport styles from './Rating.module.css';\n\nimport { clamp } from 'helpers/math';\nimport { useCustomEnsuredControl } from 'hooks/useEnsureControl';\nimport { Icon } from 'types/Icon';\n\nimport { VisuallyHidden } from 'components/Service/VisuallyHidden/VisuallyHidden';\nimport { IconStar } from './icons/star';\n\nexport interface RatingProps extends Omit<HTMLAttributes<HTMLLabelElement>, 'onChange'> {\n  /** The precision of the rating, determining the fraction of the star that can be selected. */\n  precision?: 0.1 | 0.2 | 0.25 | 0.5 | 1;\n  /** The maximum rating value, representing the number of icons displayed. */\n  max?: number;\n  /** The current value of the rating. */\n  value?: number;\n  /** Callback function invoked when the rating value changes. */\n  onChange?: (value: number) => void;\n  /** The component used to render the rating icons. Defaults to a star icon. */\n  IconContainer?: ElementType<Icon>;\n}\n\nconst MINIMUM_PRECISION = 0.1;\n\n/**\n * Renders a customizable rating component, allowing users to provide a rating by selecting a value using icons (e.g., stars).\n * Supports fractional ratings through precision control and allows for custom rating icon components.\n */\nexport const Rating = ({\n  precision = 1,\n  max = 5,\n  onChange,\n  value: valueProp = 0,\n  IconContainer = IconStar,\n}: RatingProps) => {\n  const [value, setValue] = useCustomEnsuredControl({\n    defaultValue: valueProp,\n    onChange,\n  });\n\n  const normalizedPrecision = clamp(precision, MINIMUM_PRECISION, 1);\n\n  const onChangeLabel = (event: ChangeEvent<HTMLLabelElement>) => {\n    const { target } = event;\n    if (target instanceof HTMLInputElement) {\n      setValue(parseFloat(target.value));\n    }\n  };\n\n  const getPickedElementWidth = (elementNumber: number): number | undefined => {\n    if (elementNumber <= value) {\n      return 1;\n    }\n\n    const valueRange = elementNumber - value;\n    if (valueRange > 0 && valueRange < 1) {\n      return 1 - valueRange;\n    }\n\n    return undefined;\n  };\n\n  const keys = Array.from(Array(max).keys());\n  return (\n    <label className={styles.wrapper} onChange={onChangeLabel}>\n      <VisuallyHidden Component=\"input\" name=\"rating\" type=\"radio\" value={0} />\n      {keys.map((key) => {\n        const elementsWithPrecision = Math.floor(1 / normalizedPrecision);\n        const elements = Array.from(Array(elementsWithPrecision).keys());\n\n        const pickedElementWidth = getPickedElementWidth(key + 1);\n        return (\n          <label key={key} className={styles.element}>\n            {pickedElementWidth !== undefined && (\n              <IconContainer\n                key=\"star-picked\"\n                className={styles['element--picked']}\n                style={{ width: `${pickedElementWidth * 100}%` }}\n              />\n            )}\n            <IconContainer key=\"star\" />\n            {elements.map((element) => (\n              <input\n                key={element}\n                type=\"radio\"\n                value={(key + (element + 1) * normalizedPrecision).toFixed(1)}\n                name=\"rating\"\n                style={{\n                  width: `${normalizedPrecision * 100}%`,\n                  left: `${element * normalizedPrecision * 100}%`,\n                }}\n                className={styles.input}\n              />\n            ))}\n          </label>\n        );\n      })}\n    </label>\n  );\n};\n"],"mappings":";AAGA,SAASA,KAAK,QAAQ;AACtB,SAASC,uBAAuB,QAAQ;AAGxC,SAASC,cAAc,QAAQ;AAC/B,SAASC,QAAQ,QAAQ;AAezB,MAAMC,iBAAA,GAAoB;AAE1B;;;;AAIA,OAAO,MAAMC,MAAA,GAASA,CAAC;EACrBC,SAAA,GAAY,CAAC;EACbC,GAAA,GAAM,CAAC;EACPC,QAAQ;EACRC,KAAA,EAAOC,SAAA,GAAY,CAAC;EACpBC,aAAA,GAAgBR;AAAQ,CACZ;EACZ,MAAM,CAACM,KAAA,EAAOG,QAAA,CAAS,GAAGX,uBAAA,CAAwB;IAChDY,YAAA,EAAcH,SAAA;IACdF;EACF;EAEA,MAAMM,mBAAA,GAAsBd,KAAA,CAAMM,SAAA,EAAWF,iBAAA,EAAmB;EAEhE,MAAMW,aAAA,GAAiBC,KAAA;IACrB,MAAM;MAAEC;IAAM,CAAE,GAAGD,KAAA;IACnB,IAAIC,MAAA,YAAkBC,gBAAA,EAAkB;MACtCN,QAAA,CAASO,UAAA,CAAWF,MAAA,CAAOR,KAAK;IAClC;EACF;EAEA,MAAMW,qBAAA,GAAyBC,aAAA;IAC7B,IAAIA,aAAA,IAAiBZ,KAAA,EAAO;MAC1B,OAAO;IACT;IAEA,MAAMa,UAAA,GAAaD,aAAA,GAAgBZ,KAAA;IACnC,IAAIa,UAAA,GAAa,KAAKA,UAAA,GAAa,GAAG;MACpC,OAAO,IAAIA,UAAA;IACb;IAEA,OAAOC,SAAA;EACT;EAEA,MAAMC,IAAA,GAAOC,KAAA,CAAMC,IAAI,CAACD,KAAA,CAAMlB,GAAA,EAAKiB,IAAI;EACvC,oBACEG,KAAA,CAAC;IAAMC,SAAS;IAAkBpB,QAAA,EAAUO,aAAA;4BAC1Cc,IAAA,CAAC3B,cAAA;MAAe4B,SAAA,EAAU;MAAQC,IAAA,EAAK;MAASC,IAAA,EAAK;MAAQvB,KAAA,EAAO;QACnEe,IAAA,CAAKS,GAAG,CAAEC,GAAA;MACT,MAAMC,qBAAA,GAAwBC,IAAA,CAAKC,KAAK,CAAC,IAAIvB,mBAAA;MAC7C,MAAMwB,QAAA,GAAWb,KAAA,CAAMC,IAAI,CAACD,KAAA,CAAMU,qBAAA,EAAuBX,IAAI;MAE7D,MAAMe,kBAAA,GAAqBnB,qBAAA,CAAsBc,GAAA,GAAM;MACvD,oBACEP,KAAA,CAAC;QAAgBC,SAAS;mBACvBW,kBAAA,KAAuBhB,SAAA,iBACtBM,IAAA,CAAClB,aAAA;UAECiB,SAAS;UACTY,KAAA,EAAO;YAAEC,KAAA,EAAO,GAAGF,kBAAA,GAAqB;UAAO;WAF3C,gB,aAKRV,IAAA,CAAClB,aAAA,MAAkB,SAClB2B,QAAA,CAASL,GAAG,CAAES,OAAA,iBACbb,IAAA,CAAC;UAECG,IAAA,EAAK;UACLvB,KAAA,EAAO,CAACyB,GAAA,GAAM,CAACQ,OAAA,GAAU,KAAK5B,mBAAkB,EAAG6B,OAAO,CAAC;UAC3DZ,IAAA,EAAK;UACLS,KAAA,EAAO;YACLC,KAAA,EAAO,GAAG3B,mBAAA,GAAsB,MAAM;YACtC8B,IAAA,EAAM,GAAGF,OAAA,GAAU5B,mBAAA,GAAsB;UAC3C;UACAc,SAAS;WARJc,OAAA;SAXCR,GAAA;IAwBhB;;AAGN","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}