{"ast":null,"code":"'use client';\n\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useState } from \"react\";\nimport { classNames } from \"../../../helpers/classNames\";\nimport { multipleRef } from \"../../../helpers/react/refs\";\nimport { useEnhancedEffect } from \"../../../hooks/useEnhancedEffect\";\nimport { useFloating } from \"@floating-ui/react-dom\";\nimport { RootRenderer } from \"../../Service/RootRenderer/RootRenderer\";\nimport { FloatingArrow } from \"./components/FloatingArrow/FloatingArrow\";\nimport { DEFAULT_ARROW_HEIGHT, DEFAULT_ARROW_PADDING, DefaultIcon } from \"./components/FloatingArrow/icons/arrow\";\nimport { autoUpdateFloatingElement } from \"./helpers/autoUpdateFloatingElement\";\nimport { useFloatingMiddlewares } from \"./hooks/useFloatingMiddlewares\";\n/**\n * Renders a Popper component, leveraging floating UI for dynamic, responsive positioning.\n * Supports advanced configurations like virtual elements, custom arrows, and auto-position updates.\n */\nexport const Popper = /*#__PURE__*/forwardRef((_param, ref) => {\n  var {\n      // UseFloatingMiddlewaresOptions\n      placement = 'auto',\n      sameWidth,\n      offsetByMainAxis = 8,\n      offsetByCrossAxis = 0,\n      withArrow = true,\n      customMiddlewares,\n      // UseFloatingProps\n      autoUpdateOnTargetResize = false,\n      // ArrowProps\n      arrowProps,\n      ArrowIcon = DefaultIcon,\n      Component = 'div',\n      style,\n      targetRef,\n      className,\n      children\n    } = _param,\n    restProps = _object_without_properties(_param, [\"placement\", \"sameWidth\", \"offsetByMainAxis\", \"offsetByCrossAxis\", \"withArrow\", \"customMiddlewares\", \"autoUpdateOnTargetResize\", \"arrowProps\", \"ArrowIcon\", \"Component\", \"style\", \"targetRef\", \"className\", \"children\"]);\n  const [arrowRef, setArrowRef] = useState(null);\n  const {\n    strictPlacement,\n    middlewares\n  } = useFloatingMiddlewares({\n    placement,\n    sameWidth,\n    withArrow,\n    arrowRef,\n    arrowHeight: (arrowProps === null || arrowProps === void 0 ? void 0 : arrowProps.height) || DEFAULT_ARROW_HEIGHT,\n    arrowPadding: (arrowProps === null || arrowProps === void 0 ? void 0 : arrowProps.padding) || DEFAULT_ARROW_PADDING,\n    offsetByMainAxis,\n    offsetByCrossAxis,\n    customMiddlewares\n  });\n  const {\n    placement: resolvedPlacement,\n    refs,\n    middlewareData,\n    floatingStyles\n  } = useFloating({\n    placement: strictPlacement,\n    middleware: middlewares,\n    whileElementsMounted(...args) {\n      return autoUpdateFloatingElement(...args, {\n        elementResize: autoUpdateOnTargetResize\n      });\n    }\n  });\n  useEnhancedEffect(() => {\n    refs.setReference('current' in targetRef ? targetRef.current : targetRef);\n  }, [refs.setReference, targetRef]);\n  return /*#__PURE__*/_jsx(RootRenderer, {\n    children: /*#__PURE__*/_jsxs(Component, _object_spread_props(_object_spread({}, restProps), {\n      ref: multipleRef(ref, refs.setFloating),\n      style: _object_spread({}, style, floatingStyles),\n      className: classNames(\"tgui-e9c83f4f150e5513\", className),\n      children: [withArrow && /*#__PURE__*/_jsx(FloatingArrow, _object_spread_props(_object_spread({}, arrowProps), {\n        coords: middlewareData.arrow,\n        placement: resolvedPlacement,\n        ref: setArrowRef,\n        Icon: ArrowIcon\n      })), children]\n    }))\n  });\n});","map":{"version":3,"names":["forwardRef","useState","classNames","multipleRef","useEnhancedEffect","useFloating","RootRenderer","FloatingArrow","DEFAULT_ARROW_HEIGHT","DEFAULT_ARROW_PADDING","DefaultIcon","autoUpdateFloatingElement","useFloatingMiddlewares","Popper","_param","ref","placement","sameWidth","offsetByMainAxis","offsetByCrossAxis","withArrow","customMiddlewares","autoUpdateOnTargetResize","arrowProps","ArrowIcon","Component","style","targetRef","className","children","restProps","_object_without_properties","arrowRef","setArrowRef","strictPlacement","middlewares","arrowHeight","height","arrowPadding","padding","resolvedPlacement","refs","middlewareData","floatingStyles","middleware","whileElementsMounted","args","elementResize","setReference","current","_jsx","_jsxs","_object_spread_props","_object_spread","setFloating","coords","arrow","Icon"],"sources":["/home/dmitry/Projects/MEPhI/MEPhI360/TGUI-Example/node_modules/@telegram-apps/telegram-ui/src/components/Overlays/Popper/Popper.tsx"],"sourcesContent":["'use client';\n\nimport { ElementType, forwardRef, HTMLAttributes, RefObject, useState } from 'react';\nimport styles from './Popper.module.css';\n\nimport { classNames } from 'helpers/classNames';\nimport { multipleRef } from 'helpers/react/refs';\nimport { useEnhancedEffect } from 'hooks/useEnhancedEffect';\n\nimport { useFloating, VirtualElement } from '@floating-ui/react-dom';\n\nimport { RootRenderer } from 'components/Service/RootRenderer/RootRenderer';\nimport { FloatingArrow, FloatingArrowProps } from './components/FloatingArrow/FloatingArrow';\nimport { DEFAULT_ARROW_HEIGHT, DEFAULT_ARROW_PADDING, DefaultIcon } from './components/FloatingArrow/icons/arrow';\nimport { autoUpdateFloatingElement } from './helpers/autoUpdateFloatingElement';\nimport { useFloatingMiddlewares, UseFloatingMiddlewaresOptions } from './hooks/useFloatingMiddlewares';\n\nexport interface PopperProps extends Omit<UseFloatingMiddlewaresOptions, 'arrowHeight' | 'arrowPadding' | 'arrowRef'>, HTMLAttributes<HTMLDivElement> {\n  /** Reference to the target element or virtual element for precise positioning. */\n  targetRef: RefObject<HTMLElement> | VirtualElement;\n  /** Configuration and customization options for the floating arrow component. */\n  arrowProps?: FloatingArrowProps & {\n    /** Optionally override the default arrow height. */\n    height?: number;\n    /** Optionally override the default arrow padding. */\n    padding?: number;\n  };\n  /** Optional custom component for the arrow icon, replacing the default. */\n  ArrowIcon?: FloatingArrowProps['Icon'];\n  /** Defines the root element type of the Popper, allowing for semantic customization. */\n  Component?: ElementType;\n  /** Opt-in feature to automatically update Popper's position when the target element resizes. */\n  autoUpdateOnTargetResize?: boolean;\n}\n\n/**\n * Renders a Popper component, leveraging floating UI for dynamic, responsive positioning.\n * Supports advanced configurations like virtual elements, custom arrows, and auto-position updates.\n */\nexport const Popper = forwardRef(({\n  // UseFloatingMiddlewaresOptions\n  placement = 'auto',\n  sameWidth,\n  offsetByMainAxis = 8,\n  offsetByCrossAxis = 0,\n  withArrow = true,\n  customMiddlewares,\n\n  // UseFloatingProps\n  autoUpdateOnTargetResize = false,\n\n  // ArrowProps\n  arrowProps,\n  ArrowIcon = DefaultIcon,\n\n  Component = 'div',\n  style,\n  targetRef,\n  className,\n  children,\n  ...restProps\n}: PopperProps, ref) => {\n  const [arrowRef, setArrowRef] = useState<HTMLDivElement | null>(null);\n\n  const { strictPlacement, middlewares } = useFloatingMiddlewares({\n    placement,\n    sameWidth,\n    withArrow,\n    arrowRef,\n    arrowHeight: arrowProps?.height || DEFAULT_ARROW_HEIGHT,\n    arrowPadding: arrowProps?.padding || DEFAULT_ARROW_PADDING,\n    offsetByMainAxis,\n    offsetByCrossAxis,\n    customMiddlewares,\n  });\n\n  const {\n    placement: resolvedPlacement,\n    refs,\n    middlewareData,\n    floatingStyles,\n  } = useFloating({\n    placement: strictPlacement,\n    middleware: middlewares,\n    whileElementsMounted(...args) {\n      return autoUpdateFloatingElement(...args, {\n        elementResize: autoUpdateOnTargetResize,\n      });\n    },\n  });\n\n  useEnhancedEffect(() => {\n    refs.setReference('current' in targetRef ? targetRef.current : targetRef);\n  }, [refs.setReference, targetRef]);\n\n  return (\n    <RootRenderer>\n      <Component\n        {...restProps}\n        ref={multipleRef(ref, refs.setFloating)}\n        style={{ ...style, ...floatingStyles }}\n        className={classNames(styles.wrapper, className)}\n      >\n        {withArrow && (\n          <FloatingArrow\n            {...arrowProps}\n            coords={middlewareData.arrow}\n            placement={resolvedPlacement}\n            ref={setArrowRef}\n            Icon={ArrowIcon}\n          />\n        )}\n        {children}\n      </Component>\n    </RootRenderer>\n  );\n});\n"],"mappings":"AAAA;;;;;;AAEA,SAAsBA,UAAU,EAA6BC,QAAQ,QAAQ;AAG7E,SAASC,UAAU,QAAQ;AAC3B,SAASC,WAAW,QAAQ;AAC5B,SAASC,iBAAiB,QAAQ;AAElC,SAASC,WAAW,QAAwB;AAE5C,SAASC,YAAY,QAAQ;AAC7B,SAASC,aAAa,QAA4B;AAClD,SAASC,oBAAoB,EAAEC,qBAAqB,EAAEC,WAAW,QAAQ;AACzE,SAASC,yBAAyB,QAAQ;AAC1C,SAASC,sBAAsB,QAAuC;AAoBtE;;;;AAIA,OAAO,MAAMC,MAAA,gBAASb,UAAA,CAAW,CAAAc,MAAA,EAsBjBC,GAAA;MAtBkB;MAChC;MACAC,SAAA,GAAY,MAAM;MAClBC,SAAS;MACTC,gBAAA,GAAmB,CAAC;MACpBC,iBAAA,GAAoB,CAAC;MACrBC,SAAA,GAAY,IAAI;MAChBC,iBAAiB;MAEjB;MACAC,wBAAA,GAA2B,KAAK;MAEhC;MACAC,UAAU;MACVC,SAAA,GAAYd,WAAW;MAEvBe,SAAA,GAAY,KAAK;MACjBC,KAAK;MACLC,SAAS;MACTC,SAAS;MACTC;IAAQ,CAEI,GAAAf,MAAA;IADTgB,SAAA,GAAAC,0BAAA,CAAAjB,MAAA,GAnBH,aACA,aACA,oBACA,qBACA,aACA,qBAGA,4BAGA,cACA,aAEA,aACA,SACA,aACA,aACA,W;EAGA,MAAM,CAACkB,QAAA,EAAUC,WAAA,CAAY,GAAGhC,QAAA,CAAgC;EAEhE,MAAM;IAAEiC,eAAe;IAAEC;EAAW,CAAE,GAAGvB,sBAAA,CAAuB;IAC9DI,SAAA;IACAC,SAAA;IACAG,SAAA;IACAY,QAAA;IACAI,WAAA,EAAa,CAAAb,UAAA,aAAAA,UAAA,uBAAAA,UAAA,CAAYc,MAAM,KAAI7B,oBAAA;IACnC8B,YAAA,EAAc,CAAAf,UAAA,aAAAA,UAAA,uBAAAA,UAAA,CAAYgB,OAAO,KAAI9B,qBAAA;IACrCS,gBAAA;IACAC,iBAAA;IACAE;EACF;EAEA,MAAM;IACJL,SAAA,EAAWwB,iBAAiB;IAC5BC,IAAI;IACJC,cAAc;IACdC;EAAc,CACf,GAAGtC,WAAA,CAAY;IACdW,SAAA,EAAWkB,eAAA;IACXU,UAAA,EAAYT,WAAA;IACZU,qBAAqB,GAAGC,IAAI;MAC1B,OAAOnC,yBAAA,IAA6BmC,IAAA,EAAM;QACxCC,aAAA,EAAezB;MACjB;IACF;EACF;EAEAlB,iBAAA,CAAkB;IAChBqC,IAAA,CAAKO,YAAY,CAAC,aAAarB,SAAA,GAAYA,SAAA,CAAUsB,OAAO,GAAGtB,SAAA;EACjE,GAAG,CAACc,IAAA,CAAKO,YAAY,EAAErB,SAAA,CAAU;EAEjC,oBACEuB,IAAA,CAAC5C,YAAA;cACC,aAAA6C,KAAA,CAAC1B,SAAA,EAAA2B,oBAAA,CAAAC,cAAA,KACKvB,SAAA;MACJf,GAAA,EAAKZ,WAAA,CAAYY,GAAA,EAAK0B,IAAA,CAAKa,WAAW;MACtC5B,KAAA,EAAO2B,cAAA,KAAK3B,KAAA,EAAUiB,cAAA;MACtBf,SAAA,EAAW1B,UAAA,0BAA2B0B,SAAA;iBAErCR,SAAA,iBACC8B,IAAA,CAAC3C,aAAA,EAAA6C,oBAAA,CAAAC,cAAA,KACK9B,UAAA;QACJgC,MAAA,EAAQb,cAAA,CAAec,KAAK;QAC5BxC,SAAA,EAAWwB,iBAAA;QACXzB,GAAA,EAAKkB,WAAA;QACLwB,IAAA,EAAMjC;WAGTK,QAAA;;;AAIT","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}