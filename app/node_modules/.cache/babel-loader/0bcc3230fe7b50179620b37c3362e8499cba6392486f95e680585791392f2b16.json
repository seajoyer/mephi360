{"ast":null,"code":"import { canUseDOM } from \"../../../../../helpers/dom\";\nexport const getBrowserAppearanceSubscriber = setAppearance => {\n  if (!canUseDOM || !window.matchMedia) {\n    return () => {};\n  }\n  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n  const listener = () => {\n    setAppearance(mediaQuery.matches ? 'dark' : 'light');\n  };\n  mediaQuery.addEventListener('change', listener);\n  return () => mediaQuery.removeEventListener('change', listener);\n};","map":{"version":3,"names":["canUseDOM","getBrowserAppearanceSubscriber","setAppearance","window","matchMedia","mediaQuery","listener","matches","addEventListener","removeEventListener"],"sources":["/home/dmitry/Projects/MEPhI/MEPhI360/app/node_modules/@telegram-apps/telegram-ui/src/components/Service/AppRoot/hooks/helpers/getBrowserAppearanceSubscriber.ts"],"sourcesContent":["import { canUseDOM } from 'helpers/dom';\n\nimport { AppRootContextInterface } from 'components/Service/AppRoot/AppRootContext';\n\nexport const getBrowserAppearanceSubscriber = (\n  setAppearance: (appearance: NonNullable<AppRootContextInterface['appearance']>) => void,\n): () => void => {\n  if (!canUseDOM || !window.matchMedia) {\n    return () => {};\n  }\n\n  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n  const listener = () => {\n    setAppearance(mediaQuery.matches ? 'dark' : 'light');\n  };\n\n  mediaQuery.addEventListener('change', listener);\n  return () => mediaQuery.removeEventListener('change', listener);\n};\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ;AAI1B,OAAO,MAAMC,8BAAA,GACXC,aAAA;EAEA,IAAI,CAACF,SAAA,IAAa,CAACG,MAAA,CAAOC,UAAU,EAAE;IACpC,OAAO,OAAO;EAChB;EAEA,MAAMC,UAAA,GAAaF,MAAA,CAAOC,UAAU,CAAC;EACrC,MAAME,QAAA,GAAWA,CAAA;IACfJ,aAAA,CAAcG,UAAA,CAAWE,OAAO,GAAG,SAAS;EAC9C;EAEAF,UAAA,CAAWG,gBAAgB,CAAC,UAAUF,QAAA;EACtC,OAAO,MAAMD,UAAA,CAAWI,mBAAmB,CAAC,UAAUH,QAAA;AACxD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}