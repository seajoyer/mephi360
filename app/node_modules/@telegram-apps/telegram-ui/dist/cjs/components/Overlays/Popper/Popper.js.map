{"version":3,"sources":["../../../../../src/components/Overlays/Popper/Popper.tsx"],"sourcesContent":["'use client';\n\nimport { ElementType, forwardRef, HTMLAttributes, RefObject, useState } from 'react';\nimport styles from './Popper.module.css';\n\nimport { classNames } from 'helpers/classNames';\nimport { multipleRef } from 'helpers/react/refs';\nimport { useEnhancedEffect } from 'hooks/useEnhancedEffect';\n\nimport { useFloating, VirtualElement } from '@floating-ui/react-dom';\n\nimport { RootRenderer } from 'components/Service/RootRenderer/RootRenderer';\nimport { FloatingArrow, FloatingArrowProps } from './components/FloatingArrow/FloatingArrow';\nimport { DEFAULT_ARROW_HEIGHT, DEFAULT_ARROW_PADDING, DefaultIcon } from './components/FloatingArrow/icons/arrow';\nimport { autoUpdateFloatingElement } from './helpers/autoUpdateFloatingElement';\nimport { useFloatingMiddlewares, UseFloatingMiddlewaresOptions } from './hooks/useFloatingMiddlewares';\n\nexport interface PopperProps extends Omit<UseFloatingMiddlewaresOptions, 'arrowHeight' | 'arrowPadding' | 'arrowRef'>, HTMLAttributes<HTMLDivElement> {\n  /** Reference to the target element or virtual element for precise positioning. */\n  targetRef: RefObject<HTMLElement> | VirtualElement;\n  /** Configuration and customization options for the floating arrow component. */\n  arrowProps?: FloatingArrowProps & {\n    /** Optionally override the default arrow height. */\n    height?: number;\n    /** Optionally override the default arrow padding. */\n    padding?: number;\n  };\n  /** Optional custom component for the arrow icon, replacing the default. */\n  ArrowIcon?: FloatingArrowProps['Icon'];\n  /** Defines the root element type of the Popper, allowing for semantic customization. */\n  Component?: ElementType;\n  /** Opt-in feature to automatically update Popper's position when the target element resizes. */\n  autoUpdateOnTargetResize?: boolean;\n}\n\n/**\n * Renders a Popper component, leveraging floating UI for dynamic, responsive positioning.\n * Supports advanced configurations like virtual elements, custom arrows, and auto-position updates.\n */\nexport const Popper = forwardRef(({\n  // UseFloatingMiddlewaresOptions\n  placement = 'auto',\n  sameWidth,\n  offsetByMainAxis = 8,\n  offsetByCrossAxis = 0,\n  withArrow = true,\n  customMiddlewares,\n\n  // UseFloatingProps\n  autoUpdateOnTargetResize = false,\n\n  // ArrowProps\n  arrowProps,\n  ArrowIcon = DefaultIcon,\n\n  Component = 'div',\n  style,\n  targetRef,\n  className,\n  children,\n  ...restProps\n}: PopperProps, ref) => {\n  const [arrowRef, setArrowRef] = useState<HTMLDivElement | null>(null);\n\n  const { strictPlacement, middlewares } = useFloatingMiddlewares({\n    placement,\n    sameWidth,\n    withArrow,\n    arrowRef,\n    arrowHeight: arrowProps?.height || DEFAULT_ARROW_HEIGHT,\n    arrowPadding: arrowProps?.padding || DEFAULT_ARROW_PADDING,\n    offsetByMainAxis,\n    offsetByCrossAxis,\n    customMiddlewares,\n  });\n\n  const {\n    placement: resolvedPlacement,\n    refs,\n    middlewareData,\n    floatingStyles,\n  } = useFloating({\n    placement: strictPlacement,\n    middleware: middlewares,\n    whileElementsMounted(...args) {\n      return autoUpdateFloatingElement(...args, {\n        elementResize: autoUpdateOnTargetResize,\n      });\n    },\n  });\n\n  useEnhancedEffect(() => {\n    refs.setReference('current' in targetRef ? targetRef.current : targetRef);\n  }, [refs.setReference, targetRef]);\n\n  return (\n    <RootRenderer>\n      <Component\n        {...restProps}\n        ref={multipleRef(ref, refs.setFloating)}\n        style={{ ...style, ...floatingStyles }}\n        className={classNames(styles.wrapper, className)}\n      >\n        {withArrow && (\n          <FloatingArrow\n            {...arrowProps}\n            coords={middlewareData.arrow}\n            placement={resolvedPlacement}\n            ref={setArrowRef}\n            Icon={ArrowIcon}\n          />\n        )}\n        {children}\n      </Component>\n    </RootRenderer>\n  );\n});\n"],"names":["Popper","forwardRef","ref","placement","sameWidth","offsetByMainAxis","offsetByCrossAxis","withArrow","customMiddlewares","autoUpdateOnTargetResize","arrowProps","ArrowIcon","DefaultIcon","Component","style","targetRef","className","children","restProps","arrowRef","setArrowRef","useState","strictPlacement","middlewares","useFloatingMiddlewares","arrowHeight","height","DEFAULT_ARROW_HEIGHT","arrowPadding","padding","DEFAULT_ARROW_PADDING","resolvedPlacement","refs","middlewareData","floatingStyles","useFloating","middleware","whileElementsMounted","args","autoUpdateFloatingElement","elementResize","useEnhancedEffect","setReference","current","RootRenderer","multipleRef","setFloating","classNames","FloatingArrow","coords","arrow","Icon"],"mappings":"AAAA;;;;;+BAuCaA;;;eAAAA;;;;;;;uBArCgE;4BAGlD;sBACC;mCACM;0BAEU;8BAEf;+BACqB;uBACuB;2CAC/B;wCAC4B;AAwB/D,MAAMA,uBAASC,IAAAA,iBAAU,EAAC,SAsBjBC;QAtBkB,EAChC,gCAAgC;IAChCC,YAAY,MAAM,EAClBC,SAAS,EACTC,mBAAmB,CAAC,EACpBC,oBAAoB,CAAC,EACrBC,YAAY,IAAI,EAChBC,iBAAiB,EAEjB,mBAAmB;IACnBC,2BAA2B,KAAK,EAEhC,aAAa;IACbC,UAAU,EACVC,YAAYC,kBAAW,EAEvBC,YAAY,KAAK,EACjBC,KAAK,EACLC,SAAS,EACTC,SAAS,EACTC,QAAQ,EAEI,WADTC;QAnBHf;QACAC;QACAC;QACAC;QACAC;QACAC;QAGAC;QAGAC;QACAC;QAEAE;QACAC;QACAC;QACAC;QACAC;;IAGA,MAAM,CAACE,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAAwB;IAEhE,MAAM,EAAEC,eAAe,EAAEC,WAAW,EAAE,GAAGC,IAAAA,8CAAsB,EAAC;QAC9DrB;QACAC;QACAG;QACAY;QACAM,aAAaf,CAAAA,uBAAAA,iCAAAA,WAAYgB,MAAM,KAAIC,2BAAoB;QACvDC,cAAclB,CAAAA,uBAAAA,iCAAAA,WAAYmB,OAAO,KAAIC,4BAAqB;QAC1DzB;QACAC;QACAE;IACF;IAEA,MAAM,EACJL,WAAW4B,iBAAiB,EAC5BC,IAAI,EACJC,cAAc,EACdC,cAAc,EACf,GAAGC,IAAAA,qBAAW,EAAC;QACdhC,WAAWmB;QACXc,YAAYb;QACZc,sBAAqB,GAAGC,IAAI;YAC1B,OAAOC,IAAAA,oDAAyB,KAAID,MAAM;gBACxCE,eAAe/B;YACjB;QACF;IACF;IAEAgC,IAAAA,oCAAiB,EAAC;QAChBT,KAAKU,YAAY,CAAC,aAAa3B,YAAYA,UAAU4B,OAAO,GAAG5B;IACjE,GAAG;QAACiB,KAAKU,YAAY;QAAE3B;KAAU;IAEjC,qBACE,qBAAC6B,0BAAY;kBACX,cAAA,sBAAC/B,uDACKK;YACJhB,KAAK2C,IAAAA,iBAAW,EAAC3C,KAAK8B,KAAKc,WAAW;YACtChC,OAAO,qBAAKA,OAAUoB;YACtBlB,WAAW+B,IAAAA,sBAAU,2BAAiB/B;;gBAErCT,2BACC,qBAACyC,4BAAa,8CACRtC;oBACJuC,QAAQhB,eAAeiB,KAAK;oBAC5B/C,WAAW4B;oBACX7B,KAAKkB;oBACL+B,MAAMxC;;gBAGTM;;;;AAIT"}