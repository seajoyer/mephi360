{"version":3,"sources":["../../../../../../../src/components/Overlays/Modal/components/ModalOverlay/ModalOverlay.tsx"],"sourcesContent":["import { forwardRef, useMemo } from 'react';\nimport styles from './ModalOverlay.module.css';\n\nimport { classNames } from 'helpers/classNames';\nimport { hexToRGB } from 'helpers/color';\nimport { getTelegramData } from 'helpers/telegram';\nimport { useAppRootContext } from 'hooks/useAppRootContext';\n\nimport { Drawer } from '@xelene/vaul-with-scroll-fix';\n\nexport interface ModalOverlayProps {\n  className?: string;\n}\n\nconst DEFAULT_LIGHT_OVERLAY_RGB = [255, 255, 255];\nconst DEFAULT_DARK_OVERLAY_RGB = [33, 33, 33];\n\nexport const ModalOverlay = forwardRef<HTMLDivElement, ModalOverlayProps>(({\n  className,\n  ...props\n}, ref) => {\n  const context = useAppRootContext();\n\n  // We don't use getComputedStyle because overlay renders before the appearance is changing\n  const [r, g, b] = useMemo(() => {\n    const telegramData = getTelegramData();\n    if (telegramData && telegramData.themeParams.bg_color) {\n      return hexToRGB(telegramData.themeParams.bg_color);\n    }\n\n    return context.appearance === 'light' ? DEFAULT_LIGHT_OVERLAY_RGB : DEFAULT_DARK_OVERLAY_RGB;\n  }, [context.appearance]);\n\n  return (\n    <Drawer.Overlay\n      ref={ref}\n      // Opacity on overlay is dynamically calculated based on the percentage of opened drawers\n      // This is why we use rgba here and not background: token + opacity\n      style={{ background: `rgba(${r}, ${g}, ${b}, .4)` }}\n      className={classNames(styles.wrapper, className)}\n      {...props}\n    />\n  );\n});\n"],"names":["ModalOverlay","DEFAULT_LIGHT_OVERLAY_RGB","DEFAULT_DARK_OVERLAY_RGB","forwardRef","ref","className","props","context","useAppRootContext","r","g","b","useMemo","telegramData","getTelegramData","themeParams","bg_color","hexToRGB","appearance","Drawer","Overlay","style","background","classNames"],"mappings":";;;;+BAiBaA;;;eAAAA;;;;;;uBAjBuB;4BAGT;uBACF;0BACO;mCACE;mCAEX;AAMvB,MAAMC,4BAA4B;IAAC;IAAK;IAAK;CAAI;AACjD,MAAMC,2BAA2B;IAAC;IAAI;IAAI;CAAG;AAEtC,MAAMF,6BAAeG,IAAAA,iBAAU,EAAoC,SAGvEC;QAHwE,EACzEC,SAAS,EAEV,WADIC;QADHD;;IAGA,MAAME,UAAUC,IAAAA,oCAAiB;IAEjC,0FAA0F;IAC1F,MAAM,CAACC,GAAGC,GAAGC,EAAE,GAAGC,IAAAA,cAAO,EAAC;QACxB,MAAMC,eAAeC,IAAAA,yBAAe;QACpC,IAAID,gBAAgBA,aAAaE,WAAW,CAACC,QAAQ,EAAE;YACrD,OAAOC,IAAAA,eAAQ,EAACJ,aAAaE,WAAW,CAACC,QAAQ;QACnD;QAEA,OAAOT,QAAQW,UAAU,KAAK,UAAUjB,4BAA4BC;IACtE,GAAG;QAACK,QAAQW,UAAU;KAAC;IAEvB,qBACE,qBAACC,yBAAM,CAACC,OAAO;QACbhB,KAAKA;QACL,yFAAyF;QACzF,mEAAmE;QACnEiB,OAAO;YAAEC,YAAY,CAAC,KAAK,EAAEb,EAAE,EAAE,EAAEC,EAAE,EAAE,EAAEC,EAAE,KAAK,CAAC;QAAC;QAClDN,WAAWkB,IAAAA,sBAAU,2BAAiBlB;OAClCC;AAGV"}