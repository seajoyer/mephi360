{"version":3,"sources":["../../../../../../src/components/Overlays/Popper/hooks/useFloatingMiddlewares.ts"],"sourcesContent":["import { useMemo } from 'react';\n\nimport {\n  arrow,\n  ArrowOptions,\n  autoPlacement,\n  flip,\n  Middleware,\n  offset,\n  shift,\n  size,\n} from '@floating-ui/react-dom';\n\nimport { getAutoPlacementAlignment, isNotAutoPlacement } from './helpers/alignment';\nimport { PlacementWithAuto } from './types';\n\nexport interface UseFloatingMiddlewaresOptions {\n  /** By default, the component will automatically choose the best placement */\n  placement?: PlacementWithAuto;\n  /** Offset along the main axis. */\n  offsetByMainAxis?: number;\n  /** Offset along the cross axis. */\n  offsetByCrossAxis?: number;\n  /** Ref for arrow element */\n  arrowRef?: ArrowOptions['element'];\n  /** Whether to display an arrow pointing to the anchor element. */\n  withArrow?: boolean;\n  /** The height of the arrow. This is added to `mainAxis` to prevent the arrow from overlapping the anchor element. */\n  arrowHeight?: number;\n  /** A safe zone around the arrow to prevent it from exceeding the content bounds. */\n  arrowPadding?: number;\n  /** Sets the width to match the target element. */\n  sameWidth?: boolean;\n  /** An array of custom modifiers for Popper (should be memoized). */\n  customMiddlewares?: Middleware[];\n}\n\nexport const useFloatingMiddlewares = ({\n  placement = 'bottom-start',\n  arrowRef = null,\n  withArrow,\n  arrowHeight,\n  arrowPadding,\n  sameWidth,\n  offsetByMainAxis = 0,\n  offsetByCrossAxis = 0,\n  customMiddlewares,\n}: UseFloatingMiddlewaresOptions) => {\n  return useMemo(() => {\n    const isNotAutoPlaced = isNotAutoPlacement(placement);\n    const middlewares: Middleware[] = [\n      offset({\n        crossAxis: offsetByCrossAxis,\n        mainAxis: withArrow && arrowHeight ? offsetByMainAxis + arrowHeight : offsetByMainAxis,\n      }),\n    ];\n\n    if (isNotAutoPlaced) {\n      middlewares.push(\n        flip({\n          fallbackAxisSideDirection: 'start',\n        }),\n      );\n    } else {\n      middlewares.push(autoPlacement({\n        alignment: getAutoPlacementAlignment(placement),\n      }));\n    }\n\n    middlewares.push(shift());\n\n    if (sameWidth) {\n      middlewares.push(\n        size({\n          apply({ rects, elements }) {\n            Object.assign(elements.floating.style, {\n              width: `${rects.reference.width}px`,\n            });\n          },\n        }),\n      );\n    }\n\n    if (customMiddlewares) {\n      middlewares.push(...customMiddlewares);\n    }\n\n    if (withArrow) {\n      middlewares.push(\n        arrow({\n          element: arrowRef,\n          padding: arrowPadding,\n        }),\n      );\n    }\n\n    return {\n      middlewares,\n      strictPlacement: isNotAutoPlaced ? placement : undefined,\n    };\n  }, [\n    offsetByCrossAxis,\n    arrowRef,\n    withArrow,\n    arrowHeight,\n    arrowPadding,\n    offsetByMainAxis,\n    sameWidth,\n    customMiddlewares,\n    placement,\n  ]);\n};\n"],"names":["useFloatingMiddlewares","placement","arrowRef","withArrow","arrowHeight","arrowPadding","sameWidth","offsetByMainAxis","offsetByCrossAxis","customMiddlewares","useMemo","isNotAutoPlaced","isNotAutoPlacement","middlewares","offset","crossAxis","mainAxis","push","flip","fallbackAxisSideDirection","autoPlacement","alignment","getAutoPlacementAlignment","shift","size","apply","rects","elements","Object","assign","floating","style","width","reference","arrow","element","padding","strictPlacement","undefined"],"mappings":";;;;+BAqCaA;;;eAAAA;;;uBArCW;0BAWjB;2BAEuD;AAwBvD,MAAMA,yBAAyB,CAAC,EACrCC,YAAY,cAAc,EAC1BC,WAAW,IAAI,EACfC,SAAS,EACTC,WAAW,EACXC,YAAY,EACZC,SAAS,EACTC,mBAAmB,CAAC,EACpBC,oBAAoB,CAAC,EACrBC,iBAAiB,EACa;IAC9B,OAAOC,IAAAA,cAAO,EAAC;QACb,MAAMC,kBAAkBC,IAAAA,6BAAkB,EAACX;QAC3C,MAAMY,cAA4B;YAChCC,IAAAA,gBAAM,EAAC;gBACLC,WAAWP;gBACXQ,UAAUb,aAAaC,cAAcG,mBAAmBH,cAAcG;YACxE;SACD;QAED,IAAII,iBAAiB;YACnBE,YAAYI,IAAI,CACdC,IAAAA,cAAI,EAAC;gBACHC,2BAA2B;YAC7B;QAEJ,OAAO;YACLN,YAAYI,IAAI,CAACG,IAAAA,uBAAa,EAAC;gBAC7BC,WAAWC,IAAAA,oCAAyB,EAACrB;YACvC;QACF;QAEAY,YAAYI,IAAI,CAACM,IAAAA,eAAK;QAEtB,IAAIjB,WAAW;YACbO,YAAYI,IAAI,CACdO,IAAAA,cAAI,EAAC;gBACHC,OAAM,EAAEC,KAAK,EAAEC,QAAQ,EAAE;oBACvBC,OAAOC,MAAM,CAACF,SAASG,QAAQ,CAACC,KAAK,EAAE;wBACrCC,OAAO,CAAC,EAAEN,MAAMO,SAAS,CAACD,KAAK,CAAC,EAAE,CAAC;oBACrC;gBACF;YACF;QAEJ;QAEA,IAAIvB,mBAAmB;YACrBI,YAAYI,IAAI,IAAIR;QACtB;QAEA,IAAIN,WAAW;YACbU,YAAYI,IAAI,CACdiB,IAAAA,eAAK,EAAC;gBACJC,SAASjC;gBACTkC,SAAS/B;YACX;QAEJ;QAEA,OAAO;YACLQ;YACAwB,iBAAiB1B,kBAAkBV,YAAYqC;QACjD;IACF,GAAG;QACD9B;QACAN;QACAC;QACAC;QACAC;QACAE;QACAD;QACAG;QACAR;KACD;AACH"}