{"version":3,"sources":["../../../../../../src/components/Service/AppRoot/hooks/useAppearance.ts"],"sourcesContent":["'use client';\n\nimport { useCallback, useContext, useEffect, useState } from 'react';\n\nimport { getTelegramData } from 'helpers/telegram';\n\nimport { AppRootContext, AppRootContextInterface } from '../AppRootContext';\nimport { getBrowserAppearanceSubscriber } from './helpers/getBrowserAppearanceSubscriber';\nimport { getInitialAppearance } from './helpers/getInitialAppearance';\n\nexport const useAppearance = (appearanceProp?: AppRootContextInterface['appearance']): NonNullable<AppRootContextInterface['appearance']> => {\n  const { appearance: contextAppearance } = useContext(AppRootContext);\n  const [appearance, setAppearance] = useState(appearanceProp || contextAppearance || getInitialAppearance());\n\n  const handleThemeChange = useCallback(() => {\n    const telegramData = getTelegramData();\n    if (!telegramData) {\n      return;\n    }\n\n    setAppearance(telegramData.colorScheme);\n  }, []);\n\n  useEffect(() => {\n    if (appearanceProp !== undefined) {\n      setAppearance(appearanceProp);\n      return () => {};\n    }\n\n    const telegramData = getTelegramData();\n    if (telegramData) {\n      telegramData.onEvent('themeChanged', handleThemeChange);\n      return () => telegramData.offEvent('themeChanged', handleThemeChange);\n    }\n\n    return getBrowserAppearanceSubscriber(setAppearance);\n  }, [appearanceProp]);\n\n  return appearance;\n};\n"],"names":["useAppearance","appearanceProp","appearance","contextAppearance","useContext","AppRootContext","setAppearance","useState","getInitialAppearance","handleThemeChange","useCallback","telegramData","getTelegramData","colorScheme","useEffect","undefined","onEvent","offEvent","getBrowserAppearanceSubscriber"],"mappings":"AAAA;;;;;+BAUaA;;;eAAAA;;;uBARgD;0BAE7B;gCAEwB;gDACT;sCACV;AAE9B,MAAMA,gBAAgB,CAACC;IAC5B,MAAM,EAAEC,YAAYC,iBAAiB,EAAE,GAAGC,IAAAA,iBAAU,EAACC,8BAAc;IACnE,MAAM,CAACH,YAAYI,cAAc,GAAGC,IAAAA,eAAQ,EAACN,kBAAkBE,qBAAqBK,IAAAA,0CAAoB;IAExG,MAAMC,oBAAoBC,IAAAA,kBAAW,EAAC;QACpC,MAAMC,eAAeC,IAAAA,yBAAe;QACpC,IAAI,CAACD,cAAc;YACjB;QACF;QAEAL,cAAcK,aAAaE,WAAW;IACxC,GAAG,EAAE;IAELC,IAAAA,gBAAS,EAAC;QACR,IAAIb,mBAAmBc,WAAW;YAChCT,cAAcL;YACd,OAAO,KAAO;QAChB;QAEA,MAAMU,eAAeC,IAAAA,yBAAe;QACpC,IAAID,cAAc;YAChBA,aAAaK,OAAO,CAAC,gBAAgBP;YACrC,OAAO,IAAME,aAAaM,QAAQ,CAAC,gBAAgBR;QACrD;QAEA,OAAOS,IAAAA,8DAA8B,EAACZ;IACxC,GAAG;QAACL;KAAe;IAEnB,OAAOC;AACT"}