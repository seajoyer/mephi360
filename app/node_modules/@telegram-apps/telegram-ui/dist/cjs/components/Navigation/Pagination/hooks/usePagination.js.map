{"version":3,"sources":["../../../../../../src/components/Navigation/Pagination/hooks/usePagination.ts"],"sourcesContent":["'use client';\n\nimport { range } from 'helpers/array';\nimport { useCustomEnsuredControl } from 'hooks/useEnsureControl';\n\nimport { PaginationType } from './enum';\nimport { UsePaginationItem, UsePaginationProps } from './types';\n\n/**\n * A bit changed hook from @mui\n * Source: https://github.com/mui/material-ui/blob/master/packages/mui-material/src/usePagination/usePagination.js\n * */\nexport const usePagination = ({\n  boundaryCount = 1,\n  count = 1,\n  defaultPage = 1,\n  hideNextButton = false,\n  hidePrevButton = false,\n  onChange,\n  page: pageProp,\n  siblingCount = 1,\n}: UsePaginationProps): UsePaginationItem[] => {\n  const [page, setPageState] = useCustomEnsuredControl({\n    value: pageProp,\n    defaultValue: defaultPage,\n  });\n\n  const handleClick: UsePaginationProps['onChange'] = (event, value) => {\n    if (!pageProp) {\n      setPageState(value);\n    }\n\n    if (onChange) {\n      onChange(event, value);\n    }\n  };\n\n  const startPages = range(1, Math.min(boundaryCount, count));\n  const endPages = range(Math.max(count - boundaryCount + 1, boundaryCount + 1), count);\n\n  const siblingsStart = Math.max(\n    Math.min(\n      // Natural start\n      page - siblingCount,\n      // Lower boundary when page is high\n      count - boundaryCount - siblingCount * 2 - 1,\n    ),\n    // Greater than startPages\n    boundaryCount + 2,\n  );\n\n  const siblingsEnd = Math.min(\n    Math.max(\n      // Natural end\n      page + siblingCount,\n      // Upper boundary when page is low\n      boundaryCount + siblingCount * 2 + 2,\n    ),\n    // Less than endPages\n    endPages.length > 0 ? endPages[0] - 2 : count - 1,\n  );\n\n  // Basic list of items to render\n  // e.g. itemList = ['first', 'previous', 1, 'ellipsis', 4, 5, 6, 'ellipsis', 10, 'next', 'last']\n  const itemList: Array<PaginationType | number> = [\n    ...(hidePrevButton ? [] : [PaginationType.Previous]),\n    ...startPages,\n\n    // Start ellipsis\n    // eslint-disable-next-line no-nested-ternary\n    ...(siblingsStart > boundaryCount + 2\n      ? [PaginationType.StartEllipsis]\n      : boundaryCount + 1 < count - boundaryCount\n        ? [boundaryCount + 1]\n        : []),\n\n    // Sibling pages\n    ...range(siblingsStart, siblingsEnd),\n\n    // End ellipsis\n    // eslint-disable-next-line no-nested-ternary\n    ...(siblingsEnd < count - boundaryCount - 1\n      ? [PaginationType.EndEllipsis]\n      : count - boundaryCount > boundaryCount\n        ? [count - boundaryCount]\n        : []),\n\n    ...endPages,\n    ...(hideNextButton ? [] : [PaginationType.Next]),\n  ];\n\n  // Map the button type to its page number\n  const buttonPage = (type: UsePaginationItem['type']) => {\n    switch (type) {\n      case 'previous':\n        return page - 1;\n      case 'next':\n        return page + 1;\n      default:\n        return null;\n    }\n  };\n\n  return itemList.map<UsePaginationItem>((typeOrPageNumber) => {\n    if (typeof typeOrPageNumber === 'number') {\n      return {\n        onClick: (event) => handleClick(event, typeOrPageNumber),\n        type: PaginationType.Page,\n        page: typeOrPageNumber,\n        selected: typeOrPageNumber === page,\n        disabled: false,\n        'aria-current': typeOrPageNumber === page ? 'true' : undefined,\n      };\n    }\n\n    return {\n      onClick: (event) => handleClick(event, buttonPage(typeOrPageNumber) || 0),\n      type: typeOrPageNumber,\n      page: buttonPage(typeOrPageNumber),\n      selected: false,\n      disabled:\n        (![PaginationType.StartEllipsis, PaginationType.EndEllipsis].includes(typeOrPageNumber) &&\n          (typeOrPageNumber === PaginationType.Next ? page >= count : page <= 1)),\n    };\n  });\n};\n"],"names":["usePagination","boundaryCount","count","defaultPage","hideNextButton","hidePrevButton","onChange","page","pageProp","siblingCount","setPageState","useCustomEnsuredControl","value","defaultValue","handleClick","event","startPages","range","Math","min","endPages","max","siblingsStart","siblingsEnd","length","itemList","PaginationType","Previous","StartEllipsis","EndEllipsis","Next","buttonPage","type","map","typeOrPageNumber","onClick","Page","selected","disabled","undefined","includes"],"mappings":"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"}