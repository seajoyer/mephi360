{"version":3,"sources":["../../../../src/components/Overlays/Popper/Popper.tsx"],"sourcesContent":["'use client';\n\nimport { ElementType, forwardRef, HTMLAttributes, RefObject, useState } from 'react';\nimport styles from './Popper.module.css';\n\nimport { classNames } from 'helpers/classNames';\nimport { multipleRef } from 'helpers/react/refs';\nimport { useEnhancedEffect } from 'hooks/useEnhancedEffect';\n\nimport { useFloating, VirtualElement } from '@floating-ui/react-dom';\n\nimport { RootRenderer } from 'components/Service/RootRenderer/RootRenderer';\nimport { FloatingArrow, FloatingArrowProps } from './components/FloatingArrow/FloatingArrow';\nimport { DEFAULT_ARROW_HEIGHT, DEFAULT_ARROW_PADDING, DefaultIcon } from './components/FloatingArrow/icons/arrow';\nimport { autoUpdateFloatingElement } from './helpers/autoUpdateFloatingElement';\nimport { useFloatingMiddlewares, UseFloatingMiddlewaresOptions } from './hooks/useFloatingMiddlewares';\n\nexport interface PopperProps extends Omit<UseFloatingMiddlewaresOptions, 'arrowHeight' | 'arrowPadding' | 'arrowRef'>, HTMLAttributes<HTMLDivElement> {\n  /** Reference to the target element or virtual element for precise positioning. */\n  targetRef: RefObject<HTMLElement> | VirtualElement;\n  /** Configuration and customization options for the floating arrow component. */\n  arrowProps?: FloatingArrowProps & {\n    /** Optionally override the default arrow height. */\n    height?: number;\n    /** Optionally override the default arrow padding. */\n    padding?: number;\n  };\n  /** Optional custom component for the arrow icon, replacing the default. */\n  ArrowIcon?: FloatingArrowProps['Icon'];\n  /** Defines the root element type of the Popper, allowing for semantic customization. */\n  Component?: ElementType;\n  /** Opt-in feature to automatically update Popper's position when the target element resizes. */\n  autoUpdateOnTargetResize?: boolean;\n}\n\n/**\n * Renders a Popper component, leveraging floating UI for dynamic, responsive positioning.\n * Supports advanced configurations like virtual elements, custom arrows, and auto-position updates.\n */\nexport const Popper = forwardRef(({\n  // UseFloatingMiddlewaresOptions\n  placement = 'auto',\n  sameWidth,\n  offsetByMainAxis = 8,\n  offsetByCrossAxis = 0,\n  withArrow = true,\n  customMiddlewares,\n\n  // UseFloatingProps\n  autoUpdateOnTargetResize = false,\n\n  // ArrowProps\n  arrowProps,\n  ArrowIcon = DefaultIcon,\n\n  Component = 'div',\n  style,\n  targetRef,\n  className,\n  children,\n  ...restProps\n}: PopperProps, ref) => {\n  const [arrowRef, setArrowRef] = useState<HTMLDivElement | null>(null);\n\n  const { strictPlacement, middlewares } = useFloatingMiddlewares({\n    placement,\n    sameWidth,\n    withArrow,\n    arrowRef,\n    arrowHeight: arrowProps?.height || DEFAULT_ARROW_HEIGHT,\n    arrowPadding: arrowProps?.padding || DEFAULT_ARROW_PADDING,\n    offsetByMainAxis,\n    offsetByCrossAxis,\n    customMiddlewares,\n  });\n\n  const {\n    placement: resolvedPlacement,\n    refs,\n    middlewareData,\n    floatingStyles,\n  } = useFloating({\n    placement: strictPlacement,\n    middleware: middlewares,\n    whileElementsMounted(...args) {\n      return autoUpdateFloatingElement(...args, {\n        elementResize: autoUpdateOnTargetResize,\n      });\n    },\n  });\n\n  useEnhancedEffect(() => {\n    refs.setReference('current' in targetRef ? targetRef.current : targetRef);\n  }, [refs.setReference, targetRef]);\n\n  return (\n    <RootRenderer>\n      <Component\n        {...restProps}\n        ref={multipleRef(ref, refs.setFloating)}\n        style={{ ...style, ...floatingStyles }}\n        className={classNames(styles.wrapper, className)}\n      >\n        {withArrow && (\n          <FloatingArrow\n            {...arrowProps}\n            coords={middlewareData.arrow}\n            placement={resolvedPlacement}\n            ref={setArrowRef}\n            Icon={ArrowIcon}\n          />\n        )}\n        {children}\n      </Component>\n    </RootRenderer>\n  );\n});\n"],"names":["forwardRef","useState","classNames","multipleRef","useEnhancedEffect","useFloating","RootRenderer","FloatingArrow","DEFAULT_ARROW_HEIGHT","DEFAULT_ARROW_PADDING","DefaultIcon","autoUpdateFloatingElement","useFloatingMiddlewares","Popper","ref","placement","sameWidth","offsetByMainAxis","offsetByCrossAxis","withArrow","customMiddlewares","autoUpdateOnTargetResize","arrowProps","ArrowIcon","Component","style","targetRef","className","children","restProps","arrowRef","setArrowRef","strictPlacement","middlewares","arrowHeight","height","arrowPadding","padding","resolvedPlacement","refs","middlewareData","floatingStyles","middleware","whileElementsMounted","args","elementResize","setReference","current","setFloating","coords","arrow","Icon"],"mappings":"AAAA;;;;;AAEA,SAAsBA,UAAU,EAA6BC,QAAQ,QAAQ,QAAQ;AAGrF,SAASC,UAAU,QAAQ,8BAAqB;AAChD,SAASC,WAAW,QAAQ,8BAAqB;AACjD,SAASC,iBAAiB,QAAQ,mCAA0B;AAE5D,SAASC,WAAW,QAAwB,yBAAyB;AAErE,SAASC,YAAY,QAAQ,0CAA+C;AAC5E,SAASC,aAAa,QAA4B,2CAA2C;AAC7F,SAASC,oBAAoB,EAAEC,qBAAqB,EAAEC,WAAW,QAAQ,yCAAyC;AAClH,SAASC,yBAAyB,QAAQ,sCAAsC;AAChF,SAASC,sBAAsB,QAAuC,iCAAiC;AAoBvG;;;CAGC,GACD,OAAO,MAAMC,uBAASb,WAAW,SAsBjBc;QAtBkB,EAChC,gCAAgC;IAChCC,YAAY,MAAM,EAClBC,SAAS,EACTC,mBAAmB,CAAC,EACpBC,oBAAoB,CAAC,EACrBC,YAAY,IAAI,EAChBC,iBAAiB,EAEjB,mBAAmB;IACnBC,2BAA2B,KAAK,EAEhC,aAAa;IACbC,UAAU,EACVC,YAAYb,WAAW,EAEvBc,YAAY,KAAK,EACjBC,KAAK,EACLC,SAAS,EACTC,SAAS,EACTC,QAAQ,EAEI,WADTC;QAnBHd;QACAC;QACAC;QACAC;QACAC;QACAC;QAGAC;QAGAC;QACAC;QAEAC;QACAC;QACAC;QACAC;QACAC;;IAGA,MAAM,CAACE,UAAUC,YAAY,GAAG9B,SAAgC;IAEhE,MAAM,EAAE+B,eAAe,EAAEC,WAAW,EAAE,GAAGrB,uBAAuB;QAC9DG;QACAC;QACAG;QACAW;QACAI,aAAaZ,CAAAA,uBAAAA,iCAAAA,WAAYa,MAAM,KAAI3B;QACnC4B,cAAcd,CAAAA,uBAAAA,iCAAAA,WAAYe,OAAO,KAAI5B;QACrCQ;QACAC;QACAE;IACF;IAEA,MAAM,EACJL,WAAWuB,iBAAiB,EAC5BC,IAAI,EACJC,cAAc,EACdC,cAAc,EACf,GAAGpC,YAAY;QACdU,WAAWiB;QACXU,YAAYT;QACZU,sBAAqB,GAAGC,IAAI;YAC1B,OAAOjC,6BAA6BiC,MAAM;gBACxCC,eAAexB;YACjB;QACF;IACF;IAEAjB,kBAAkB;QAChBmC,KAAKO,YAAY,CAAC,aAAapB,YAAYA,UAAUqB,OAAO,GAAGrB;IACjE,GAAG;QAACa,KAAKO,YAAY;QAAEpB;KAAU;IAEjC,qBACE,KAACpB;kBACC,cAAA,MAACkB,mDACKK;YACJf,KAAKX,YAAYW,KAAKyB,KAAKS,WAAW;YACtCvB,OAAO,mBAAKA,OAAUgB;YACtBd,WAAWzB,oCAA2ByB;;gBAErCR,2BACC,KAACZ,uDACKe;oBACJ2B,QAAQT,eAAeU,KAAK;oBAC5BnC,WAAWuB;oBACXxB,KAAKiB;oBACLoB,MAAM5B;;gBAGTK;;;;AAIT,GAAG"}