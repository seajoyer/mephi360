{"version":3,"sources":["../../../../../src/components/Overlays/Popper/helpers/autoUpdateFloatingElement.ts"],"sourcesContent":["import { FloatingElement } from '@floating-ui/core';\nimport { autoUpdate, AutoUpdateOptions, ReferenceType } from '@floating-ui/react-dom';\nimport { isHTMLElement } from '@floating-ui/utils/dom';\n\nconst defaultOptions = {\n  ancestorScroll: true,\n  ancestorResize: true,\n  elementResize: false,\n  animationFrame: false,\n};\n\nexport const autoUpdateFloatingElement = (\n  reference: ReferenceType,\n  floating: FloatingElement,\n  update: () => void,\n  options: Partial<AutoUpdateOptions> = defaultOptions,\n): ReturnType<typeof autoUpdate> => {\n  const { elementResize = false, ...restOptions } = options;\n\n  const autoUpdateLibDisposer = autoUpdate(reference, floating, update, {\n    ...restOptions,\n    elementResize: false,\n  });\n\n  let observer: MutationObserver | null = null;\n  if (elementResize) {\n    let initialUpdate = true;\n    observer = new MutationObserver(() => {\n      if (!initialUpdate) {\n        update();\n      }\n\n      initialUpdate = false;\n    });\n\n    if (isHTMLElement(reference)) {\n      observer.observe(reference, {\n        childList: true,\n        subtree: true,\n      });\n    }\n\n    observer.observe(floating, {\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  return () => {\n    if (observer !== null) {\n      observer.disconnect();\n      observer = null;\n    }\n    autoUpdateLibDisposer();\n  };\n};\n"],"names":["autoUpdate","isHTMLElement","defaultOptions","ancestorScroll","ancestorResize","elementResize","animationFrame","autoUpdateFloatingElement","reference","floating","update","options","restOptions","autoUpdateLibDisposer","observer","initialUpdate","MutationObserver","observe","childList","subtree","disconnect"],"mappings":";;;AACA,SAASA,UAAU,QAA0C,yBAAyB;AACtF,SAASC,aAAa,QAAQ,yBAAyB;AAEvD,MAAMC,iBAAiB;IACrBC,gBAAgB;IAChBC,gBAAgB;IAChBC,eAAe;IACfC,gBAAgB;AAClB;AAEA,OAAO,MAAMC,4BAA4B,CACvCC,WACAC,UACAC,QACAC,UAAsCT,cAAc;IAEpD,MAAM,EAAEG,gBAAgB,KAAK,EAAkB,GAAGM,SAAhBC,yCAAgBD;QAA1CN;;IAER,MAAMQ,wBAAwBb,WAAWQ,WAAWC,UAAUC,QAAQ,wCACjEE;QACHP,eAAe;;IAGjB,IAAIS,WAAoC;IACxC,IAAIT,eAAe;QACjB,IAAIU,gBAAgB;QACpBD,WAAW,IAAIE,iBAAiB;YAC9B,IAAI,CAACD,eAAe;gBAClBL;YACF;YAEAK,gBAAgB;QAClB;QAEA,IAAId,cAAcO,YAAY;YAC5BM,SAASG,OAAO,CAACT,WAAW;gBAC1BU,WAAW;gBACXC,SAAS;YACX;QACF;QAEAL,SAASG,OAAO,CAACR,UAAU;YACzBS,WAAW;YACXC,SAAS;QACX;IACF;IAEA,OAAO;QACL,IAAIL,aAAa,MAAM;YACrBA,SAASM,UAAU;YACnBN,WAAW;QACb;QACAD;IACF;AACF,EAAE"}