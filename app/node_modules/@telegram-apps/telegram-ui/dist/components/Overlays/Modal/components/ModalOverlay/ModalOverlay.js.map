{"version":3,"sources":["../../../../../../src/components/Overlays/Modal/components/ModalOverlay/ModalOverlay.tsx"],"sourcesContent":["import { forwardRef, useMemo } from 'react';\nimport styles from './ModalOverlay.module.css';\n\nimport { classNames } from 'helpers/classNames';\nimport { hexToRGB } from 'helpers/color';\nimport { getTelegramData } from 'helpers/telegram';\nimport { useAppRootContext } from 'hooks/useAppRootContext';\n\nimport { Drawer } from '@xelene/vaul-with-scroll-fix';\n\nexport interface ModalOverlayProps {\n  className?: string;\n}\n\nconst DEFAULT_LIGHT_OVERLAY_RGB = [255, 255, 255];\nconst DEFAULT_DARK_OVERLAY_RGB = [33, 33, 33];\n\nexport const ModalOverlay = forwardRef<HTMLDivElement, ModalOverlayProps>(({\n  className,\n  ...props\n}, ref) => {\n  const context = useAppRootContext();\n\n  // We don't use getComputedStyle because overlay renders before the appearance is changing\n  const [r, g, b] = useMemo(() => {\n    const telegramData = getTelegramData();\n    if (telegramData && telegramData.themeParams.bg_color) {\n      return hexToRGB(telegramData.themeParams.bg_color);\n    }\n\n    return context.appearance === 'light' ? DEFAULT_LIGHT_OVERLAY_RGB : DEFAULT_DARK_OVERLAY_RGB;\n  }, [context.appearance]);\n\n  return (\n    <Drawer.Overlay\n      ref={ref}\n      // Opacity on overlay is dynamically calculated based on the percentage of opened drawers\n      // This is why we use rgba here and not background: token + opacity\n      style={{ background: `rgba(${r}, ${g}, ${b}, .4)` }}\n      className={classNames(styles.wrapper, className)}\n      {...props}\n    />\n  );\n});\n"],"names":["forwardRef","useMemo","classNames","hexToRGB","getTelegramData","useAppRootContext","Drawer","DEFAULT_LIGHT_OVERLAY_RGB","DEFAULT_DARK_OVERLAY_RGB","ModalOverlay","ref","className","props","context","r","g","b","telegramData","themeParams","bg_color","appearance","Overlay","style","background"],"mappings":";;;AAAA,SAASA,UAAU,EAAEC,OAAO,QAAQ,QAAQ;AAG5C,SAASC,UAAU,QAAQ,oCAAqB;AAChD,SAASC,QAAQ,QAAQ,+BAAgB;AACzC,SAASC,eAAe,QAAQ,kCAAmB;AACnD,SAASC,iBAAiB,QAAQ,yCAA0B;AAE5D,SAASC,MAAM,QAAQ,+BAA+B;AAMtD,MAAMC,4BAA4B;IAAC;IAAK;IAAK;CAAI;AACjD,MAAMC,2BAA2B;IAAC;IAAI;IAAI;CAAG;AAE7C,OAAO,MAAMC,6BAAeT,WAA8C,SAGvEU;QAHwE,EACzEC,SAAS,EAEV,WADIC;QADHD;;IAGA,MAAME,UAAUR;IAEhB,0FAA0F;IAC1F,MAAM,CAACS,GAAGC,GAAGC,EAAE,GAAGf,QAAQ;QACxB,MAAMgB,eAAeb;QACrB,IAAIa,gBAAgBA,aAAaC,WAAW,CAACC,QAAQ,EAAE;YACrD,OAAOhB,SAASc,aAAaC,WAAW,CAACC,QAAQ;QACnD;QAEA,OAAON,QAAQO,UAAU,KAAK,UAAUb,4BAA4BC;IACtE,GAAG;QAACK,QAAQO,UAAU;KAAC;IAEvB,qBACE,KAACd,OAAOe,OAAO;QACbX,KAAKA;QACL,yFAAyF;QACzF,mEAAmE;QACnEY,OAAO;YAAEC,YAAY,CAAC,KAAK,EAAET,EAAE,EAAE,EAAEC,EAAE,EAAE,EAAEC,EAAE,KAAK,CAAC;QAAC;QAClDL,WAAWT,oCAA2BS;OAClCC;AAGV,GAAG"}