{"version":3,"sources":["../../../../src/components/Blocks/Image/Image.tsx"],"sourcesContent":["'use client';\n\nimport { ImgHTMLAttributes, isValidElement, ReactNode, SyntheticEvent, useState } from 'react';\nimport styles from './Image.module.css';\n\nimport { classNames } from 'helpers/classNames';\n\nimport { getBorderRadius } from 'components/Blocks/Image/helpers/getBorderRadius';\nimport { ImageBadge } from './components/ImageBadge/ImageBadge';\n\nexport interface ImageProps extends ImgHTMLAttributes<HTMLElement> {\n  /** Specifies the size of the image, with a default of 40. Sizes are defined in pixels. */\n  size?: 20 | 24 | 28 | 40 | 48 | 96;\n  /** An element (often an icon) displayed when the image fails to load or the `src` attribute is not provided. */\n  fallbackIcon?: ReactNode;\n  /** Optional children to render within the image component's container. */\n  children?: ReactNode;\n}\n\n/**\n * Renders an image with optional fallback content. It supports custom sizing and will automatically\n * handle loading states and errors by optionally displaying a fallback icon. This component can also\n * include additional content, such as badges or overlays, as children.\n */\nexport const Image = ({\n  size = 40,\n  className,\n  alt,\n  crossOrigin,\n  decoding,\n  loading,\n  referrerPolicy,\n  sizes,\n  src,\n  srcSet,\n  useMap,\n  style,\n  fallbackIcon,\n  children,\n  onLoad,\n  onError,\n  ...restProps\n}: ImageProps) => {\n  const [loaded, setLoaded] = useState(false);\n  const [failed, setFailed] = useState(false);\n\n  const hasSrc = src || srcSet;\n  const needShowFallbackIcon = (failed || !hasSrc) && isValidElement(fallbackIcon);\n\n  const handleImageLoad = (event: SyntheticEvent<HTMLImageElement>) => {\n    if (loaded) {\n      return;\n    }\n\n    setLoaded(true);\n    setFailed(false);\n    onLoad?.(event);\n  };\n\n  const handleImageError = (event: SyntheticEvent<HTMLImageElement>) => {\n    setLoaded(false);\n    setFailed(true);\n    onError?.(event);\n  };\n\n  return (\n    <div\n      style={{\n        width: size,\n        minWidth: size,\n        height: size,\n        borderRadius: style?.borderRadius || getBorderRadius(size),\n        ...style,\n      }}\n      className={classNames(\n        styles.wrapper,\n        loaded && styles['wrapper--loaded'],\n        className,\n      )}\n      {...restProps}\n    >\n      {hasSrc && (\n        <img\n          alt={alt}\n          className={styles.image}\n          crossOrigin={crossOrigin}\n          decoding={decoding}\n          loading={loading}\n          referrerPolicy={referrerPolicy}\n          sizes={sizes}\n          src={src}\n          srcSet={srcSet}\n          useMap={useMap}\n          onLoad={handleImageLoad}\n          onError={handleImageError}\n        />\n      )}\n      {needShowFallbackIcon && <div className={styles.fallback}>{fallbackIcon}</div>}\n      {children}\n    </div>\n  );\n};\n\nImage.Badge = ImageBadge;\n"],"names":["isValidElement","useState","classNames","getBorderRadius","ImageBadge","Image","size","className","alt","crossOrigin","decoding","loading","referrerPolicy","sizes","src","srcSet","useMap","style","fallbackIcon","children","onLoad","onError","restProps","loaded","setLoaded","failed","setFailed","hasSrc","needShowFallbackIcon","handleImageLoad","event","handleImageError","div","width","minWidth","height","borderRadius","img","Badge"],"mappings":"AAAA;;;;;AAEA,SAA4BA,cAAc,EAA6BC,QAAQ,QAAQ,QAAQ;AAG/F,SAASC,UAAU,QAAQ,8BAAqB;AAEhD,SAASC,eAAe,QAAQ,4BAAkD;AAClF,SAASC,UAAU,QAAQ,qCAAqC;AAWhE;;;;CAIC,GACD,OAAO,MAAMC,QAAQ;QAAC,EACpBC,OAAO,EAAE,EACTC,SAAS,EACTC,GAAG,EACHC,WAAW,EACXC,QAAQ,EACRC,OAAO,EACPC,cAAc,EACdC,KAAK,EACLC,GAAG,EACHC,MAAM,EACNC,MAAM,EACNC,KAAK,EACLC,YAAY,EACZC,QAAQ,EACRC,MAAM,EACNC,OAAO,EAEI,WADRC;QAhBHhB;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;;IAGA,MAAM,CAACE,QAAQC,UAAU,GAAGvB,SAAS;IACrC,MAAM,CAACwB,QAAQC,UAAU,GAAGzB,SAAS;IAErC,MAAM0B,SAASb,OAAOC;IACtB,MAAMa,uBAAuB,AAACH,CAAAA,UAAU,CAACE,MAAK,mBAAM3B,eAAekB;IAEnE,MAAMW,kBAAkB,CAACC;QACvB,IAAIP,QAAQ;YACV;QACF;QAEAC,UAAU;QACVE,UAAU;QACVN,mBAAAA,6BAAAA,OAASU;IACX;IAEA,MAAMC,mBAAmB,CAACD;QACxBN,UAAU;QACVE,UAAU;QACVL,oBAAAA,8BAAAA,QAAUS;IACZ;IAEA,qBACE,MAACE;QACCf,OAAO;YACLgB,OAAO3B;YACP4B,UAAU5B;YACV6B,QAAQ7B;YACR8B,cAAcnB,CAAAA,kBAAAA,4BAAAA,MAAOmB,YAAY,KAAIjC,gBAAgBG;WAClDW;QAELV,WAAWL,oCAETqB,mCACAhB;OAEEe;;YAEHK,wBACC,KAACU;gBACC7B,KAAKA;gBACLD,SAAS;gBACTE,aAAaA;gBACbC,UAAUA;gBACVC,SAASA;gBACTC,gBAAgBA;gBAChBC,OAAOA;gBACPC,KAAKA;gBACLC,QAAQA;gBACRC,QAAQA;gBACRI,QAAQS;gBACRR,SAASU;;YAGZH,sCAAwB,KAACI;gBAAIzB,SAAS;0BAAoBW;;YAC1DC;;;AAGP,EAAE;AAEFd,MAAMiC,KAAK,GAAGlC"}