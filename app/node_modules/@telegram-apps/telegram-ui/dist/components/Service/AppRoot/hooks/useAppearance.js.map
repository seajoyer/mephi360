{"version":3,"sources":["../../../../../src/components/Service/AppRoot/hooks/useAppearance.ts"],"sourcesContent":["'use client';\n\nimport { useCallback, useContext, useEffect, useState } from 'react';\n\nimport { getTelegramData } from 'helpers/telegram';\n\nimport { AppRootContext, AppRootContextInterface } from '../AppRootContext';\nimport { getBrowserAppearanceSubscriber } from './helpers/getBrowserAppearanceSubscriber';\nimport { getInitialAppearance } from './helpers/getInitialAppearance';\n\nexport const useAppearance = (appearanceProp?: AppRootContextInterface['appearance']): NonNullable<AppRootContextInterface['appearance']> => {\n  const { appearance: contextAppearance } = useContext(AppRootContext);\n  const [appearance, setAppearance] = useState(appearanceProp || contextAppearance || getInitialAppearance());\n\n  const handleThemeChange = useCallback(() => {\n    const telegramData = getTelegramData();\n    if (!telegramData) {\n      return;\n    }\n\n    setAppearance(telegramData.colorScheme);\n  }, []);\n\n  useEffect(() => {\n    if (appearanceProp !== undefined) {\n      setAppearance(appearanceProp);\n      return () => {};\n    }\n\n    const telegramData = getTelegramData();\n    if (telegramData) {\n      telegramData.onEvent('themeChanged', handleThemeChange);\n      return () => telegramData.offEvent('themeChanged', handleThemeChange);\n    }\n\n    return getBrowserAppearanceSubscriber(setAppearance);\n  }, [appearanceProp]);\n\n  return appearance;\n};\n"],"names":["useCallback","useContext","useEffect","useState","getTelegramData","AppRootContext","getBrowserAppearanceSubscriber","getInitialAppearance","useAppearance","appearanceProp","appearance","contextAppearance","setAppearance","handleThemeChange","telegramData","colorScheme","undefined","onEvent","offEvent"],"mappings":"AAAA;AAEA,SAASA,WAAW,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,QAAQ;AAErE,SAASC,eAAe,QAAQ,+BAAmB;AAEnD,SAASC,cAAc,QAAiC,oBAAoB;AAC5E,SAASC,8BAA8B,QAAQ,2CAA2C;AAC1F,SAASC,oBAAoB,QAAQ,iCAAiC;AAEtE,OAAO,MAAMC,gBAAgB,CAACC;IAC5B,MAAM,EAAEC,YAAYC,iBAAiB,EAAE,GAAGV,WAAWI;IACrD,MAAM,CAACK,YAAYE,cAAc,GAAGT,SAASM,kBAAkBE,qBAAqBJ;IAEpF,MAAMM,oBAAoBb,YAAY;QACpC,MAAMc,eAAeV;QACrB,IAAI,CAACU,cAAc;YACjB;QACF;QAEAF,cAAcE,aAAaC,WAAW;IACxC,GAAG,EAAE;IAELb,UAAU;QACR,IAAIO,mBAAmBO,WAAW;YAChCJ,cAAcH;YACd,OAAO,KAAO;QAChB;QAEA,MAAMK,eAAeV;QACrB,IAAIU,cAAc;YAChBA,aAAaG,OAAO,CAAC,gBAAgBJ;YACrC,OAAO,IAAMC,aAAaI,QAAQ,CAAC,gBAAgBL;QACrD;QAEA,OAAOP,+BAA+BM;IACxC,GAAG;QAACH;KAAe;IAEnB,OAAOC;AACT,EAAE"}