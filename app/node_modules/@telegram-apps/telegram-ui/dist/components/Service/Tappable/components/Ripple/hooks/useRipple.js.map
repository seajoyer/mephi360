{"version":3,"sources":["../../../../../../../src/components/Service/Tappable/components/Ripple/hooks/useRipple.ts"],"sourcesContent":["'use client';\n\nimport { PointerEventHandler, useMemo, useState } from 'react';\n\nimport { useTimeout } from 'hooks/useTimeout';\n\nimport { Wave } from '../types/Wave';\n\nconst RIPPLE_DELAY = 70;\nconst WAVE_LIVE = 225;\n\nexport const useRipple = () => {\n  const [clicks, setClicks] = useState<Wave[]>([]);\n\n  const pointerDelayTimers = useMemo(\n    () => new Map<number, ReturnType<typeof setTimeout>>(),\n    [],\n  );\n\n  const clearClicks = useTimeout(() => setClicks([]), WAVE_LIVE);\n\n  function addClick(x: number, y: number, pointerId: number) {\n    const dateNow = Date.now();\n    const filteredClicks = clicks.filter((click) => click.date + WAVE_LIVE > dateNow);\n\n    setClicks([\n      ...filteredClicks,\n      {\n        x,\n        y,\n        date: dateNow,\n        pointerId,\n      },\n    ]);\n\n    clearClicks.set();\n    pointerDelayTimers.delete(pointerId);\n  }\n\n  const onPointerDown: PointerEventHandler<HTMLSpanElement> = (e) => {\n    const { top, left } = e.currentTarget.getBoundingClientRect();\n    const x = e.clientX - (left ?? 0);\n    const y = e.clientY - (top ?? 0);\n\n    pointerDelayTimers.set(\n      e.pointerId,\n      setTimeout(() => addClick(x, y, e.pointerId), RIPPLE_DELAY),\n    );\n  };\n\n  const onPointerCancel: PointerEventHandler<HTMLSpanElement> = (e) => {\n    const timer = pointerDelayTimers.get(e.pointerId);\n    clearTimeout(timer);\n    pointerDelayTimers.delete(e.pointerId);\n  };\n\n  return {\n    clicks,\n    onPointerDown,\n    onPointerCancel,\n  };\n};\n"],"names":["useMemo","useState","useTimeout","RIPPLE_DELAY","WAVE_LIVE","useRipple","clicks","setClicks","pointerDelayTimers","Map","clearClicks","addClick","x","y","pointerId","dateNow","Date","now","filteredClicks","filter","click","date","set","delete","onPointerDown","e","top","left","currentTarget","getBoundingClientRect","clientX","clientY","setTimeout","onPointerCancel","timer","get","clearTimeout"],"mappings":"AAAA;AAEA,SAA8BA,OAAO,EAAEC,QAAQ,QAAQ,QAAQ;AAE/D,SAASC,UAAU,QAAQ,qCAAmB;AAI9C,MAAMC,eAAe;AACrB,MAAMC,YAAY;AAElB,OAAO,MAAMC,YAAY;IACvB,MAAM,CAACC,QAAQC,UAAU,GAAGN,SAAiB,EAAE;IAE/C,MAAMO,qBAAqBR,QACzB,IAAM,IAAIS,OACV,EAAE;IAGJ,MAAMC,cAAcR,WAAW,IAAMK,UAAU,EAAE,GAAGH;IAEpD,SAASO,SAASC,CAAS,EAAEC,CAAS,EAAEC,SAAiB;QACvD,MAAMC,UAAUC,KAAKC,GAAG;QACxB,MAAMC,iBAAiBZ,OAAOa,MAAM,CAAC,CAACC,QAAUA,MAAMC,IAAI,GAAGjB,YAAYW;QAEzER,UAAU;eACLW;YACH;gBACEN;gBACAC;gBACAQ,MAAMN;gBACND;YACF;SACD;QAEDJ,YAAYY,GAAG;QACfd,mBAAmBe,MAAM,CAACT;IAC5B;IAEA,MAAMU,gBAAsD,CAACC;QAC3D,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAE,GAAGF,EAAEG,aAAa,CAACC,qBAAqB;QAC3D,MAAMjB,IAAIa,EAAEK,OAAO,GAAIH,CAAAA,iBAAAA,kBAAAA,OAAQ,CAAA;QAC/B,MAAMd,IAAIY,EAAEM,OAAO,GAAIL,CAAAA,gBAAAA,iBAAAA,MAAO,CAAA;QAE9BlB,mBAAmBc,GAAG,CACpBG,EAAEX,SAAS,EACXkB,WAAW,IAAMrB,SAASC,GAAGC,GAAGY,EAAEX,SAAS,GAAGX;IAElD;IAEA,MAAM8B,kBAAwD,CAACR;QAC7D,MAAMS,QAAQ1B,mBAAmB2B,GAAG,CAACV,EAAEX,SAAS;QAChDsB,aAAaF;QACb1B,mBAAmBe,MAAM,CAACE,EAAEX,SAAS;IACvC;IAEA,OAAO;QACLR;QACAkB;QACAS;IACF;AACF,EAAE"}